var micello={};micello.maps={};micello.maps.VERSION_SERVER="maps.micello.com";micello.maps.init=function(a,b){micello.maps.key=a;micello.maps.initCallback=b;if(micello.maps.MapControl){b()}};micello.maps.loadInit=function(){var e=(new Date()).getTime();var d=document.createElement("canvas");var f=(d.getContext)?1:0;var a=0;var b="http://"+micello.maps.VERSION_SERVER+"/webmapversion/scriptrequest?v="+a+"&t="+e+"&c="+f;micello.maps.request(b,micello.maps.loadInit2)};micello.maps.loadInit2=function(e){var d=document.getElementsByTagName("head")[0];if(!d){alert("Error: head element not found!");return}var c;var a=e.scripts;if(a){for(c=0;c<a.length;c++){micello.maps.addScript(d,a[c])}}var b=e.css;if(b){for(c=0;c<b.length;c++){micello.maps.addCss(d,b[c])}}};micello.maps.addScript=function(c,b){var a=document.createElement("script");a.type="text/javascript";a.src=b;c.appendChild(a)};micello.maps.addCss=function(b,a){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;b.appendChild(c)};micello.maps.request=function(url,callback){var xmlhttp;var doIe=false;var msg;if(window.XDomainRequest){xmlhttp=new XDomainRequest();doIe=true}else{if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{alert("This browser is not supported.");return}}if(!doIe){xmlhttp.dataManager=this;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var data=eval("("+xmlhttp.responseText+")");if(data.error){msg="Error in request: "+data.error;alert(msg)}else{callback(data)}}else{if(xmlhttp.readyState==4&&xmlhttp.status>=400){alert("Error loading map source: "+xmlhttp.status)}}}}else{xmlhttp.onload=function(){var data=eval("("+xmlhttp.responseText+")");if(data.error){msg="Error in request: "+data.error;alert(msg)}else{callback(data)}};xmlhttp.onerror=function(){msg="Error in http request. Status: "+xmlhttp.status;alert(msg)}}xmlhttp.open("GET",url,true);xmlhttp.send()};micello.maps.loadInit();