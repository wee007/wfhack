/* ======================================================================================
   @MODULES -> NAV CONTEXTUAL
   ====================================================================================== */

/*
  Usage:
    Contextual nav that's scrollable at smaller viewport

  Demo:
    Style Guide -> Modules -> Nav Contextual
*/

.nav-contextual {
  position: relative;
  @extend %mrg-base;
  border-bottom: 1px solid $color-grey-1;
}

  .nav-contextual__clip-inner {
    /* To prevent the flash between page load and the JS getting applied. This hides the scrollbar */
    overflow: hidden;

    /* Allows scrolling of the list of links when JS detects that the width of `nav-contextual__list` is wider than `nav-contextual__clip-inner`  */
    .is-clipped & {
      overflow-x: scroll;
      -webkit-overflow-scrolling: touch;
    }

    /* No JS */
    .no-js & {
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }
  }

  /* Clip scrollable contents (palm) */
  .nav-contextual__clip {
    /* Make space for the arrow on the right. The spacing needs to be smaller than .nav-contextual__clip-overlay */
    @include to-rem(margin-right, $spacing-base);
  }

    /* Gradient that lays on top of the list */
    .nav-contextual__clip-overlay {
      /* Hide the overlay by default */
      display: none;
      top: 0;
      height: 100%;
      color: $color-light-txt;
      @include to-rem(padding-left, $spacing-dbl);
      @include linear-gradient($from: rgba($color-grey-3, 0) 0%, $to: rgba($color-grey-3, 1) 50%, $dir: right, $dir-webkit: left);

      /* Shows the overlay when JS detects that the width of `nav-contextual__list` is wider than `nav-contextual__clip-inner` */
      .is-clipped & {
        display: block;
      }

      /* Shared rules */
      &,
      &:before {
        position: absolute;
        right: 0;
      }

      /* Aligning the arrow and gradient overlay vertically */
      &:before {
        top: 50%;
        @include translate(0, -50%);
      }
    }

    /* List of nav items */
    .nav-contextual__list {
      /* To prevent the flash between page load and the JS getting applied. This gives the list a big enough width to cater for all the LI */
      width: 10000px;

      /* No JS */
      .no-js & {width: auto}

      > li {
        @include to-rem(margin-left, $spacing-base);

        &:first-child {margin-left: 0;}

        a {
          @include to-rem(padding-top padding-bottom, $spacing-half);
          color: $color-light-txt;
          border-bottom: 2px solid transparent;

          @include respond-min($non-palm) {
            @include to-rem(padding-top padding-bottom, $spacing-base);
          }

          /* When the nav item is the selected section */
          &.is-active {border-bottom-color: $color-brand;}
        }
      }
    }

/* --Extenders-- */

/* Dark color */
.nav-contextual--dark {
  margin-bottom: 0;
  border-bottom: 0;

    .nav-contextual__list > li  {
      a {
        color: $color-light-txt;

        &:hover,
        &:focus {color: #fff;}

        &.is-active {color: #fff;}
      }
    }

  .nav-contextual__clip-overlay {
    color: $color-light-txt;
    @include linear-gradient($from: rgba($color-med-txt, 0) 0%, $to: rgba($color-med-txt, 1) 50%, $dir: right)
  }
}