/* ======================================================================================
   @MODULES -> STOREFRONT
   ====================================================================================== */

/*
	Usage:
		Detail view of a store.

	Demo:
		Style Guide -> Modules -> Storefront
*/

.storefront {
  @include font-size($font-size-sml, 1.5);

  /* --Global rules-- */
  p {margin-bottom: 0;}

  /* Flexslider */
  .flexslider {
    background-position: 50% 50%;
    background-repeat: no-repeat;
    background-size: cover;

    /* When there is no store banner */
    &.is-no-store-banner {@include linear-gradient($color-med-txt, $color-dark-txt);}

    /* Old IE */
    @include old-ie {
      background-position: 30% 50%;
    }

    /* Slides */
    .slides > li {
      @include to-rem(height, 140);
      overflow: hidden;

      /* Increase heights at these breakpoints */
      @include respond-min($iphone-landscape) {
        @include to-rem(height, 180);
      }

      @include respond-min($non-palm) {
        @include to-rem(height, 288);
      }

      @include respond-min($ipad-landscape) {
        @include to-rem(height, 210);
      }

      @include respond-min(1400) {
        @include to-rem(height, 228);
      }

      /* Hide the image and fallback to bg image as we always need the image to be always in view between slides */
      img {@include hide-visually;}
    }
  }
}

    /* Fix positioning of prev/next nav for old IE */
    @include old-ie {
      .flex-control-paging {@include to-rem(margin-left, -$spacing-base);}
    }

      /* Flexslider store name when no store banner is provided */
      .storefront__flexslider-storename {

        h1 {
          color: #fff;
          @include to-rem(padding-left padding-right, $spacing-base);
          @include to-rem(margin-top, -6);
          @include font-size(21, 1.3);
          text-transform: uppercase;

          /* Super long store name */
          &.is-long-store-name {@include font-size(18, 1.3);}

          /* Increase font size at these breakpoints */
          @include respond-min($iphone-landscape) {
            @include font-size(26, 1.3);

            /* Super long store name */
            &.is-long-store-name {@include font-size(23, 1.3);}
          }

          @include respond-min($non-palm) {
            @include font-size(40, 1.3);
            @include to-rem(margin-top, 0);

            /* Super long store name */
            &.is-long-store-name {@include font-size(36, 1.3);}
          }

          @include respond-min($ipad-landscape) {
            /* Super long store name */
            &.is-long-store-name {@include font-size(28, 1.3);}
          }

          @include respond-range($ipad-landscape, $desk) {
            @include font-size(32, 1.3);
          }
        }
      }

      /* Flexslider blurb */
      .storefront__flexslider-blurb {
        @include rgba-bg(#000, 0.8);
        color: #fff;

        /* When there is no store banner */
        .is-no-store-banner & {background: none;}

        p {
          width: $page-container-width;
          margin-left: auto;
          margin-right: auto;
          @include to-rem(margin-top, -14);

          /* Remove negative top positioning at this breakpoint */
          @include respond-min($iphone-landscape) {
            margin-top: 0;
          }

          /* Increase width and font size at these breakpoints */
          @include respond-min($non-palm) {
            width: 66%;
            @include font-size($font-size, 1.5);
          }

          @include respond-min($ipad-landscape) {
            width: 80%;
          }

          @include respond-range($ipad-landscape, 1100) {
            @include font-size($font-size-sml, 1.5);
          }
        }
      }

  /* --Store details-- */
  .storefront__details {

    /* Allow store link to be positioned over to the far right at this breakpoint */
    @include respond-min($ipad-portrait) {
      position: relative;
    }

    @include respond-range($ipad-portrait, $ipad-landscape - 1) {
      border-bottom: 1px solid $color-grey-1;

      /* When there are featured items */
      .is-featured-items & {border-bottom: 0;}
    }

    /* Inner container */
    .container {position: relative;}
  }

    /* Store meta */
    .storefront__details__meta {
      @extend %clear-fix;
      @include to-rem(padding-top, $spacing-third);
      @include to-rem(padding-bottom, $spacing-third - $spacing-micro);
      @include to-rem(margin-right, 100);
      margin-bottom: 0;

      /* Increase/decrease right spacing at these breakpoints */
      @include respond-min($non-palm) {
        @include to-rem(margin-right, 130);
        @include to-rem(padding-top, $spacing-half);
        @include to-rem(padding-bottom, $spacing-half - $spacing-micro);
      }

      @include respond-min($ipad-portrait) {
        @include to-rem(margin-right, 394);
      }

      @include respond-min(860) {
        @include to-rem(margin-right, 434);
      }

      @include respond-min($ipad-landscape) {
        @include to-rem(margin-right, 235);

        /* When there is no store external link */
        .is-no-external-link & {margin-right: 0;}
      }

      @include respond-min($desk) {
        @include to-rem(margin-right, 265);
      }

      @include respond-min(1360) {
        @include to-rem(margin-right, 305);
      }

      dd {
        @include to-rem(margin-bottom, $spacing-micro);
        @include to-rem(padding-left, $spacing-base + $spacing-micro);
        position: relative;

        &:last-child {margin-bottom: 0;}

        /* Icons */
        .icon:before {
          position: absolute;
          left: 0;
          top: 1px;

          /* Webkit */
          @include target-webkit {
            top: 0;
          }
        }
      }

      /* No indent */
      .storefront__details__meta__no-indent {padding-left: 0;}
    }

    /* Store phone no and location */
    .storefront__details__phone-map {

      /* Increase right indents at these breakpoints */
      @include respond-min($ipad-portrait) {
        @include to-rem(right, 261);
      }

      @include respond-min(860) {
        @include to-rem(right, 301);
      }

      /* Hide at this breakpoint */
      @include respond-min($ipad-landscape) {
        display: none;
      }

      /* When there is no store external link */
      @include respond-min($non-palm) {
        .is-no-external-link & {right: 0;}
      }

    }

    /* Mods to location link at this breakpoint */
    @include respond-min($non-palm) {
      .storefront__details__phone-map .storefront-storelist-phone-map-links__cell--location {
        @include to-rem(width, 126);

        /* Add right border and decrease width at this breakpoint */
        @include respond-min($ipad-portrait) {
          @include to-rem(width, 120);
          border-right: 1px solid $color-grey-1;

          /* When there is no store external link */
          .is-no-external-link & {border-right: 0;}
        }

        /* Vertically align */
        .storefront-storelist-phone-map-links__cell__valign {
          width: 100%;
          text-align: center;
          left: 0;
          @include translate(0, -50%);
        }

          /* Icon */
          .icon:before {@include font-size(40, 1);}

          /* Show link text */
          .hide-visually {
            @include prefix(transition, all 0.2s);
            @include hide-visually-off;
            color: $color-light-txt;
            display: block;
          }

          &:hover .hide-visually,
          &:focus .hide-visually {color: $color-med-txt;}
      }
    }

    /* Store external link */
    .storefront__details__storelink {
      @include to-rem(padding-top padding-bottom, $spacing-base);
      border-top: 1px solid $color-grey-1;

      /* Position over to the far right at this breakpoint */
      @include respond-min($ipad-portrait) {
        padding-top: 0;
        padding-bottom: 0;
        @include to-rem(padding-left, $spacing-base);
        @include to-rem(width, 261);
        position: absolute;
        right: 4%;
        top: 0;

        /* Increase width at this breakpoint */
        @include respond-min(860) {
          @include to-rem(width, 301);
        }

        /* Remove left padding and decrease width at this breakpoint */
        @include respond-min($ipad-landscape) {
          padding-left: 0;
          @include to-rem(width, 220);
        }

        /* Increase widths at these breakpoints */
        @include respond-min($desk) {
          @include to-rem(width, 250);
        }

        @include respond-min(1360) {
          @include to-rem(width, 290);
        }

        /* Shared rules */
        &,
        .container {height: 100%;}

        /* Remove container rules */
        .container {
          width: auto;
          max-width: none;
          min-width: 0;
        }
      }

        /* Decrease width of button at this breakpoint */
        @include respond-min($non-palm) {
          .btn.btn--full {
            width: 70%;
            margin-left: auto;
            margin-right: auto;

            /* Back to full width and vertically align at this breakpoint */
            @include respond-min($ipad-portrait) {
              width: 100%;
              margin: 0;
              position: absolute;
              left: 0;
              top: 50%;
              @include translate(0, -50%);
            }
          }
        }
    }

  /* Featured items */
  .storefront__featured__item {
    border-top: 1px solid $color-grey-1;

    /* Tiles */
    .tiles-non-pinboard {
      @extend %mrg-base;

      /* Decrease negative left outdent at this breakpoint range */
      @include respond-range($ipad-landscape, 1400) {
        @include to-rem(margin-left, - $spacing-half);
      }

      /* Tile containers */
      .tiles-non-pinboard__tile {

        /* Decrease gutter at this breakpoint range */
        @include respond-range($ipad-landscape, 1400) {
          @include to-rem(padding-left, $spacing-half);
        }

        /* Hide 3rd tile for palm */
        &:last-child {
          display: none;

          /* Show 3rd tile at this breakpoint */
          @include respond-min($iphone-landscape) {
            display: block;
          }
        }
      }
    }
  }

    /* Shared rules */
    .storefront__featured__hdr,
    .storefront__featured__view-more {
      font-family: $font-family-opensans;
      color: $color-light-txt;
    }

    /* Headings */
    .storefront__featured__hdr {
      @include font-size(18, 1.5);
      @include to-rem(margin-bottom, $spacing-half);

      /* Increase font size at this breakpoint */
      @include respond-min($non-palm) {
        @include font-size(22, 1.5);
      }
    }

    /* View more links */
    .storefront__featured__view-more:hover,
    .storefront__featured__view-more:focus {color: $color-med-txt;}