/* ======================================================================================
   @MODULES -> STORES / MAPS
   ====================================================================================== */

/*
	Usage:
		'Stores' section of the site, includes store listings, store detail, and centre maps.

	Demo:
		Style Guide -> Modules -> Stores / Maps
*/

.stores-maps {
  position: relative;
  z-index: 2;
  height: 100%;

  /* --Global rules-- */
  p {margin-bottom: 0;}

  /* Location icon */
  .icon--pin:before {
    color: $color-brand;
    @include font-size(28, 1);
  }
}

  /* --Shared rules-- */

  /* Outdent the pin icons so they're flush to left edge */
  .stores-list__data-cell--store-name .icon--pin:before,
  .stores-maps__filters-count .icon--pin:before {@include to-rem(margin-left, -4);}

  /* Listing and detail views container */
  .stores-maps__inner {
    position: relative;
    z-index: 4;

    /* Sit on top of map canvas at this breakpoint */
    @include respond-min($ipad-landscape) {
      position: absolute;
      top: 0;
      left: 0;
      width: 50%;
    }
  }

    /* Filters / toggle */
    .stores-maps__filters-toggle {
      background-color: $color-grey-3;

      /* When map view is in view */
      .is-map-view & {background: none;}

      /* Inner container */
      .container {
        position: relative;
        @include to-rem(padding-top padding-bottom, $spacing-half);

        /* Increase padding at this breakpoint */
        @include respond-min($non-palm) {
          @include to-rem(padding-top padding-bottom, $spacing-half+$spacing-quarter);
        }

        /* Turn off `.container` at this breakpoint */
        @include respond-min($desk) {
          width: auto;
          max-width: none;
        }
      }

        /* Header */
        .stores-maps__hdr {
          /* Hide the header at this breakpoint */
          @include respond-max($lap-end) {
            @include hide-visually;
          }

          /* When map view is in view */
          .is-map-view & {display: none;}
        }
    }

      /* Toggle button */
      .stores-maps__toggle {
        float: right;

        /* Reveal button text at this breakpoint */
        @include respond-min($non-palm) {
          .hide-visually {@include hide-visually-off;}
        }

        /* Hide at this breakpoint */
        @include respond-min($ipad-landscape) {
          &.btn {display: none;}
        }
      }

      /* Post filter count */
      .stores-maps__filters-count {
        @include font-size($font-size-sml, 1.5);
        border-top: 1px solid $color-grey-1;

        /* Inner container */
        .container {
          @include to-rem(padding-top padding-bottom, $spacing-micro);

          /* Increase padding at this breakpoint */
          @include respond-min($non-palm) {
            @include to-rem(padding-top padding-bottom, $spacing-sixth);
          }
        }
      }

    /* Listing */
    .stores-maps__listing {

      /* --Store list module-- */

      /* Remove right indent for store name at this breakpoint */
      @include respond-min($ipad-landscape) {
        .stores-list__data-cell--store-name {margin-right: 0;}
      }

        /* Hide location icon at this breakpoint */
        @include respond-min($ipad-landscape) {
          .stores-list__data-cell__icon--location {display: none;}
        }
    }

      /* Category applied indicator at this breakpoint */
      @include respond-min($desk) {
        .stores-list__data-cell--store-name.is-filter-selected {
          @include to-rem(padding-left, $spacing-base+$spacing-quarter);

          /* Location icon */
          .icon--pin:before {
            position: absolute;
            left: 0;
            @include to-rem(top, $spacing-base+$spacing-micro);
            @include to-rem(margin-top, -$spacing-sixth);
          }
        }
      }

  /* Micello map */
  .stores-maps__map {
    position: absolute;
    z-index: 3;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
  }