/* ======================================================================================
   @MODULES -> TILE
   ====================================================================================== */

/*
  Usage:
    Renders a tile for different types of content e.g. a 'Product', 'Deal', 'Event', etc. Mainly used in pin board module.

  Demo:
    Style Guide -> Modules -> Tile
*/

.tile {
  position: relative;
  color: $color-base-txt;
  @include font-size($font-size-sml, 1.5);

  /* So the social share controls can be seen when they overlap another tile */
  &:hover {z-index: 2;}

  /* Apply bottom spacing when inside the 'Pin board' module */
  .pin-board & {
    @include to-rem(margin-bottom, $grid-gutter-half);

    /* Turn off for the last tile */
    &:last-child {margin-bottom: 0;}

    /* Old IE - avoid `article` getting `display: inline` when the pin board is constructed with JS as the HTML5 shiv doesn't work in this case */
    @include old-ie {
      display: block;
    }
  }

  /* Global styles */
  a {
    color: $color-light-txt;
    display: block;

    /* Focus state for keyboard users */
    &:focus {box-shadow: $box-shadow;}
  }

  p {margin-bottom: 0;}
}

  /* Meta */
  .tile__meta {
    position: relative;
    @include to-rem(min-height, $spacing-base*2);
    @include to-rem(padding, 8 10);
  }

    /* Inner container */
    .tile__meta__inner {
      /* Needed to create spacing for `.tile__meta__icon`. Spacing = `.tile__meta` left padding + width of `.tile__meta__icon` + spacing between `.tile__meta__icon` and the text  */
      @include to-rem(margin-left, 25);

      /* Increase the left margin at this breakpoint */
      @include respond-min($non-palm) {
        @include to-rem(margin-left, 30);
      }
    }

  /* Image */
  .tile__image {
    text-align: center;
    position: relative;

    /* Red transparent image overlay shown on hover/focus of the tile */
    &:before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background-color: transparent;
      @extend %transition-subtle;
      cursor: pointer;

      .tile:hover & {background-color: rgba($color-brand, 0.15);}
    }
  }

  /* Icon */
  .tile__meta__icon {
    position: absolute;
    @include to-rem(left, -2);
    @include to-rem(top, 9);
    border-left: 2px solid $color-brand;
    background-color: $color-off-white;
    color: $color-light-txt;
    @include font-size($font-size-lrg, 1);
    @include to-rem(padding, 3 5);

    /* Increase the padding at this breakpoint, as we have more space */
    @include respond-min($non-palm) {
      @include to-rem(padding, 5 7);
    }
  }

  /* Header */
  .tile__meta__hdr {
    color: $color-dark-txt;
    font-weight: bold;
    @include font-size($font-size-milli, 1.5);

    /* Increase the font size at this breakpoint */
    @include respond-min($desk) {
      @include font-size($font-size-sml, 1.5);
    }
  }

  /* Description */
  .tile__meta__desc {
    color: $color-light-txt;
    @include font-size($font-size - 4, 1.5);

    /* Increse font size at this breakpoint */
    @include respond-min($desk) {
      @include font-size($font-size-milli, 1.5);
    }
  }

    /* Price */
    .tile__meta__price {
      color: $color-dark-txt;
      font-weight: bold;

      /* Make the font larger at this breakpoint, as we have the space */
      @include respond-min($desk) {
        @include font-size($font-size-milli, 1);
      }
    }

  /* Controls - 'Share' and 'Favourites' */
  .tile__controls {
    display: none;
    position: absolute;
    @include to-rem(top right, $spacing-quarter);

    /* Only show on non-touch devices as they have hover */
    .no-touch .tile:hover & {display: block;}

    /* Buttons */
    .controls__btn {
      @include to-rem(width, $spacing-base* 2);
      @include to-rem(height, $spacing-base* 2);
      border: 1px solid $color-grey-2;
      border-radius: $border-radius;
      background-color: #fff;

      /* Remove the border radius when button is active */
      &.is-active {
        border-color: $color-med-txt;
        border-bottom-right-radius: 0;
        border-bottom-left-radius: 0;
      }

        /* Icon */
        .icon:before {position: static;}
    }
  }

/* Deals */
.tile--deals {

  /* Meta */
  .tile__meta {
    @include to-rem(padding, 45 15);

    /* Increase the padding at this breakpoint to keep the proportions right */
    @include respond-min($non-palm) {
      @include to-rem(padding, 84 25);
    }
  }

    /* Header */
    .tile__meta__hdr {@include to-rem(margin-bottom, $spacing-quarter);}

    /* Logo */
    .tile__meta__image {
      display: block;
      @include to-rem(width, 84);

      /* Old IE - prevent the image from getting distorted */
      @include old-ie {
        img {width: 100%;}
      }

      img {
         @include to-rem(margin-bottom, $spacing-quarter);

        /* Increase the bottom spacing at this breakpoint */
        @include respond-min($non-palm) {
          @include to-rem(margin-bottom, $spacing-half);
        }
      }
    }

    /* Description */
    .tile__meta__desc {
      font-family: $font-family-lato;
      color: $color-dark-txt;
      @include font-size($font-size, 1.5);

      /* Increase the font size at this breakpoint */
      @include respond-min($non-palm) {
        @include font-size(22, 1.3);
      }
    }

  /* Icon */
  .tile__meta__icon {
    top: auto;
    @include to-rem(bottom, 7.5);

    /* Increase bottom spacing at this breakpoint */
    @include respond-min($non-palm) {
      @include to-rem(bottom, 9);
    }
  }
}