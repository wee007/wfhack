/* ======================================================================================
   @MODULES -> TILE
   ====================================================================================== */

/*
  Renders a tile for different types of content e.g. a 'Product', 'Deal', 'Event', etc. Mainly used in pin board module.

  .tile--deals              - Deals
  .tile--fixed-img-height   - Fix the tile image height

  Styleguide Tile
*/

.tile {
  position: relative;
  color: $color-txt-base;
  @include font-size($font-size-sml, 1.5);

  /* So the social share module can be seen when they overlap another tile */
  &:hover {z-index: 2;}

  /* Apply bottom spacing when inside the 'Pin board' module */
  .pin-board & {
    @include to-rem(margin-bottom, $grid-gutter-half);

    /* Turn off for the last tile */
    &:last-child {margin-bottom: 0;}
  }

  a {
    color: $color-txt-light;
    display: block;

    &:focus {box-shadow: $box-shadow;}
  }
}

  /* Image */
  .tile__image {
    text-align: center;
    position: relative;

    /* Red transparent image overlay shown on hover/focus of the tile */
    &:before {
      @extend %transition-subtle;
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background-color: transparent;
      cursor: pointer;

      .tile:hover & {background-color: rgba($color-brand, 0.15);}
    }
  }

  /* Meta */

  /*
    Note: if the height of this element changes then adjust the `$tile-meta-height` value in the 'Pin Board module -> Modifier: curation'. Only applicable 'after' the `$iphone-landscape` breakpoint.
  */

  .tile__meta {
    position: relative;
    @include to-rem(min-height, $spacing-base*2);
    @include to-rem(padding, 8 10);
  }

    /* Icon that identifies the tile */
    .tile__meta__icon {
      position: absolute;
      @include to-rem(left, -2);
      @include to-rem(top, 9);
      border-left: 2px solid $color-brand;
      background-color: $color-grey-light-3;
      color: $color-txt-light;
      @include to-rem(padding, 3 5);

      /* Increase the padding at this breakpoint, as we have more space */
      @include respond-min($non-palm) {
        @include to-rem(padding, 5 7);
      }
    }

    /* Inner container */
    .tile__meta__inner {
      /*
        Needed to create spacing for `.tile__meta__icon`. Spacing = `.tile__meta` left padding + width of `.tile__meta__icon` + spacing between `.tile__meta__icon` and the text.
      */
      @include to-rem(margin-left, 25);

      @include respond-min($non-palm) {
        @include to-rem(margin-left, 30);
      }
    }

      /* Header */
      .tile__meta__hdr {
        color: $color-txt-dark;
        font-weight: bold;
        @include font-size($font-size-milli, 1.5);

        @include respond-min($iphone-landscape) {
          @include font-size($font-size-sml, 1.5);
        }
      }

      /* Description */
      .tile__meta__desc {
        color: $color-txt-light;
        @include font-size($font-size - 4, 1.5);

        @include respond-min($iphone-landscape) {
          @include font-size($font-size-milli, 1.5);
        }
      }

        /* Price */
        .tile__meta__desc__price {
          color: $color-txt-dark;
          font-weight: bold;
        }

  /* Alternative icon, icon that sits top left corner of it's tile, have 2 types: 'Canned search' and 'Curation' */
  .tile__icon-alt {
    position: absolute;
    top: 0;
    left: 0;
    width: 100px;
    height: 100px;
    @include to-rem(padding, 3 5);
    /* 135deg diagonal gradient */
    background: -webkit-linear-gradient(-45deg, rgba(#000, 0.4) 0%, rgba(#000, 0.05) 36%, rgba(#000, 0) 55%, rgba(#000, 0) 100%);
    background: linear-gradient(135deg, rgba(#000, 0.4) 0%, rgba(#000, 0.05) 36%, rgba(#000, 0) 55%, rgba(#000, 0) 100%);

    @include respond-min($non-palm) {
      @include to-rem(padding, 5 7);
    }

    /* IE 9 - black transparent square bg as a fallback for the CSS gradient */
    .ie-9 & {
      background-color: rgba(#000, 0.5);
      width: auto;
      height: auto;
    }

    &:before {color: #fff;}
  }

  /* Controls - 'Share' and 'Favourites' */
  .tile__controls {
    display: none;
    position: absolute;
    @include to-rem(top right, $spacing-quarter);

    /* Only show on non-touch devices when tile is hovered and to keep in view via dynamic `is-active` class */
    .no-touch .tile:hover &,
    .no-touch .tile &.is-active {display: block;}

    /* Buttons */
    .controls__btn {
      @include to-rem(width, $spacing-base* 2);
      @include to-rem(height, $spacing-base* 2);
      border: 1px solid $color-grey-light-1;
      border-radius: $border-radius;
      background-color: #fff;

        /* Icon */
        .icon:before {position: static;}

        /* Preloader */
        .preloader em {@extend %hide-visually;}
    }

    /* Active state */
    .is-active .controls__btn {
      border-color: $color-grey-dark-3;
      border-bottom-right-radius: 0;
      border-bottom-left-radius: 0;
    }
  }

/* Modifier: Deals */
.tile--deals {

  /* Meta */
  .tile__meta {
    @include to-rem(padding, 45 15);

    @include respond-min($non-palm) {
      @include to-rem(padding, 84 25);
    }
  }

    /* Header and logo spacing */
    .tile__meta__hdr,
    .tile__meta__logo {
      @include to-rem(margin-bottom, $spacing-quarter);

      @include respond-min($non-palm) {
        @include to-rem(margin-bottom, $spacing-half);
      }
    }

    /* Logo */
    .tile__meta__logo {@include to-rem(width, 84);}

    /* Description */
    .tile__meta__desc {
      font-family: $font-family-lato;
      @include font-size($font-size, 1.5);
      font-weight: 300;
      color: $color-txt-dark;

      @include respond-min($non-palm) {
        @include font-size(22, 1.3);
      }
    }

  /* Icon */
  .tile__meta__icon {
    top: auto;
    @include to-rem(bottom, 7.5);

    @include respond-min($non-palm) {
      @include to-rem(bottom, 9);
    }
  }
}

/* Modifier: fix image height */

/* Note: using `line-height` to vertically align the images */

$tile-fixed-height-1: 160px !default;
$tile-fixed-height-2: 180px !default;
$tile-fixed-height-3: 220px !default;
$tile-fixed-height-4: 240px !default;
$tile-fixed-height-5: 260px !default;
$tile-fixed-height-6: 270px !default;

.tile--fixed-img-height .tile__image {
  height: $tile-fixed-height-1;
  line-height: $tile-fixed-height-1 - 1;
  /* Need this to remove browser generated white space from the `line-height` rule */
  font-size: 0;

  /* Increase heights/line-heights at these breakpoints */
  @include respond-min(400) {
    height: $tile-fixed-height-2;
    line-height: $tile-fixed-height-2 - 1;
  }

  @include respond-min($iphone-landscape) {
    height: $tile-fixed-height-3;
    line-height: $tile-fixed-height-3 - 1;
  }

  @include respond-min($ipad-portrait) {
    height: $tile-fixed-height-4;
    line-height: $tile-fixed-height-4 - 1;
  }

  @include respond-min(860) {
    height: $tile-fixed-height-5;
    line-height: $tile-fixed-height-5 - 1;
  }

  @include respond-min($desk) {
    height: $tile-fixed-height-6;
    line-height: $tile-fixed-height-6 - 1;
  }

  /* This needs to be used along with Cloudinary's 'crop - pad' and specify the maximum width the image can ever be e.g. `c_pad,w_407` */
  img {max-height: 100%;}
}