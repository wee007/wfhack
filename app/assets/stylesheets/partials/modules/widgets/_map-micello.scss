/* ======================================================================================
   @MODULES -> WIDGETS -> MAP MICELLO
   ====================================================================================== */

/*
  Usage:
    3rd party Map API from 'Micello'.

  Demo:
    Style Guide -> Modules -> Widgets -> Map Micello
*/

.map-micello {

  /* --Global rules-- */

  /* Off with bottom spacing */
  p {margin-bottom: 0;}

  /* Apply bottom spacing */
  .map-micello__mrg-base {@include to-rem(margin-bottom, $spacing-half);}

  /* Header */
  .map-micello__hdr {
    @include font-size($font-size, 1.3);
    font-weight: bold;
    display: block;
  }


}

/*
  Note: the global `.map-micello` module will be updated when work has commenced on the 'Stores' UI, right now focusing on the detail views version.
*/
.stores-map-content .map-micello {
  background-color: $color-grey-3;
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  @include to-rem(left, 450);
}

/* Detail view version */
.detail-view .map-micello {
  background-color: $color-off-white;

  /* Set min height at this breakpoint */
  @include respond-max($palm) {
    @include to-rem(min-height, 270);
  }
}

  /* Product */
  @include respond-min(978) {
    .detail-view--product .map-micello {@include to-rem(min-height, 340);}
  }

/* Static version - remove all interaction and UI elements generated by 3rd party API */
.map-micello--static {

  #ui-zoom,
  #ui-levels,
  #ui-geo {display: none !important;}
}

  /* API container */
  .map-micello__api {
    width: 100%;
    height: 100%;
  }

    /* --Overlay-- */
    .map-micello__overlay {@include to-rem(padding-top, $spacing-half+$spacing-third);}

      /* Retailer logo and details (name + open till time) */
      .map-micello__overlay__retailer {
        position: relative;
        padding-left: 100px;
      }

        /* Logo */
        .map-micello__overlay__retailer__img {
          width: 84px;
          position: absolute;
          left: 0;
          top: 4px;
        }

        /* Details */
        .map-micello__overlay__retailer__body {}

      /* Faux close button */
      .map-micello__overlay__close {
        position: absolute;
        top: 2px;
        right: 7px;
        color: $color-light-txt;
      }

    /* --3rd party stylesheet overrides-- */

    /*
      Note: have to use `!important` here a lot as we need to override the 3rd party 'Micello' styles.
    */

    #micello-map {
      @include font-size($font-size-sml, $sledgehammer: !important);
      font-family: $font-family !important;
      line-height: 1.5 !important;

      /* Map name */
      #ui-name {display: none !important;}

      /* --Overlay-- */

      /*
        - infoOut
          - infoWrapper
            - infoBack
              - infoIn
              - infoClose
            - menuTip
      */

      /* Wrapper */
      .infoWrapper,
      .menuWrapper {padding-bottom: 13px !important;}

        /* Back */
        .infoBack {
          background-color: #fff !important;
          width: 252px !important;
          min-width: none !important;
          overflow: visible !important;
          margin-bottom: -14px !important;
        }

        /* Pointer */
        .menuTip {
            background: image-url("images/map-overlay-pointer.png") no-repeat 50% 0 !important;
            position: relative;
            top: 13px !important;
            width: 100% !important;
            height: 13px !important;
        }

          /* In */
          .infoIn {
            padding: 0 !important;
            max-width: none !important;
            max-height: none !important;
            box-shadow: 0 0 10px #ccc,
                        0 1px 1px #b4b4b4;
            border: 1px solid $color-grey-2;
          }

          /* [WIP] Close button */
          .infoClose {
            display: block !important;
            @include opacity(0, !important);
            top: 0 !important;
            right: 0 !important;
          }

      /* Cosmetics */
      .micello-rounded {border-radius: 0;}

      .ui-shadow,
      .micello-pop-shadow {box-shadow: none !important;}
    }


/*
  Note: this will be moved into a more appropiate location in the framework then updated, can only do that once work has commenced on the 'Stores' UI.
*/
.stores-map-content {
  position: absolute;
  @include to-rem(top, 110);
  bottom: 0;
  left: 0;
  right: 0;

  ul {
    background-color: #fff;
    border-right: 1px solid #bababa;
    overflow: auto;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    @include to-rem(width, 450);

    li {
      @include to-rem(padding, 10 20);
      border-bottom: 1px solid #bababa;

      &.list__store {
        position: relative;
        @include to-rem(padding-left, 120);

        img {
          position: absolute;
          @include to-rem(top, 10);
          @include to-rem(left, 20);
          @include to-rem(width, 60);
          @include to-rem(height, 60);
        }
      }

      &.list__heading {
        background-color: #e8e8e8;
      }
    }
  }
}
