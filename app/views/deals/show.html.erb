<div class="detail-view__divider detail-view__divider--col grid grid--gutterless grid--flush">

  <!-- The Deal -->
  <div class="grid__item non-palm-one-half">
    <div class="island detail-view__divider--palm">
      <header class="deal-main box box--torn">
        <h2 class="deal-main__hdr txt-break-word"><%= @deal.title %></h2>
        <p class="deal-main__meta">from <%= @store.name %> <span>Deal ends <time datetime="<%= @deal.available_to.strftime("%Y-%m-%d") %>"><%= @deal.available_to.strftime("%A %e %B") %></time></span></p>
      </header>
    </div>
  </div>
  <!-- //The Deal -->

  <!-- Store location & contact store -->
  <div class="grid__item non-palm-one-half">

    <!-- Store location -->
    <div class="store-location detail-view__divider">
      map
    </div>
    <!-- //Store location -->

    <!-- Contact store -->
    <div class="island island--fill island--center islet-tops">
      <!-- [BACK END] Need to remove (trim) white space coming from the `<%= @store.phone_number %>` text field as it screwing up the `tel:` link -->
      <span class="hide-fully--non-palm">
        <a href="tel:<%= @store.phone_number %>" class="btn btn--full btn--main btn--main-alt2 btn--main-lrg"><span class="icon icon--phone icon--xlrg icon--spacing-lrg icon--flush-top" aria-hidden="true"></span><strong>Call <%= @store.name %></strong></a>
      </span>
      <p class="detail-view__check-avble hide-fully--palm"><span class="detail-view__subtle-txt">Check store availability</span> <em><span class="icon icon--phone icon--lrg icon--spacing" aria-hidden="true"></span> <%= @store.phone_number %></em></p>
    </div>
    <!-- //Contact store -->

  </div>
  <!-- //Store location & contact store -->

  <span class="detail-view__divider--col-line hide-fully--palm"></span>

</div>

<!-- Availability & fine print -->
<div class="island">

  <!-- Availability -->
  <h3 class="detail-view__hdr-sub hn">Also available at</h3>
  <ul class="detail-view__mrg-base">
    <% @deal.stores.each do |store| %>
      <li><a href="<%= centre_deal_path(store.centre.code, @deal.id)%>" class="centres-list"><span class="icon icon--pin icon--lrg icon--spacing-lrg" aria-hidden="true"></span><%= store.centre.short_name %><span class="icon icon--arrow-right icon--lrg" aria-hidden="true"></span></a></li>
    <% end %>
  </ul>
  <!-- //Availability -->

  <!-- Fine print -->
  <h3 class="hide-visually">The fine print</h3>
  <div class="detail-view__desc detail-view__desc--fine-print detail-view__subtle-txt toggle-content js-toggle-content js-hide-show">
    <!-- [BACK END] Each new line (ENTER) entered in the HTML `textarea` to generate a `p` element then can remove the static `p`s below -->
    <% @deal.terms_and_conditions.each do |paragraph| %>
      <p><%= paragraph %></p>
    <% end %>
  </div>
  <!-- //Fine print -->

</div>
<!-- //Availability & fine print -->

<%- content_for :javascript do -%>
  <script>
    $(function() {
      // Run 'Toggle content' plugin
      $('.js-toggle-content').toggleContent({
        btnTxtOpen: 'Read the fine print <span aria-hidden="true" class="icon icon--arrow-right-big icon--lrg icon--flush-top-mozilla btn--pointer__icon"></span>',
        btnTxtClose: 'Close the fine print <span aria-hidden="true" class="icon icon--arrow-left-big icon--lrg icon--flush-top-mozilla btn--pointer__icon"></span>',
        toggleBtnTrigger: $('<button type="button" class="btn btn--pointer btn--main btn--main-alt3"></button>'),
        toggleBtnWrap: $('<div class="toggle-content--btn toggle-content--btn-center toggle-content--btn-mrg-base"></div>'),
        btnPos: 'insertBefore'
      });
    });
  </script>
<%- end -%>
