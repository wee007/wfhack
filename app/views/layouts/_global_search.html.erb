<div class="header__overlay header__overlay--toggle js-search-toggle js-disabled-hide" id="search-mini">
  <div class="container" ng-controller="GlobalSearchCtrl" ng-cloak>

    <%# Search form %>
    <%= form_tag centre_products_path(centre_id: params[:centre_id] || params[:id]), class: "search-mini", role: "search", method: :get do %>
      <span class="icon icon--search" aria-hidden="true"></span>
      <label for="global-search" class="hide-visually">Search site</label>
      <input type="hidden" ng-model="centre" value="<%= params[:centre_id] || params[:id] %>">
      <input ng-model="searchQuery" ng-blur="hideSuggestions()" ng-focus="makeSuggestions()" ng-keyup="makeSuggestions($event)" ng-keydown="navigateSuggestions($event)" type="search" class="search-mini__input" id="global-search" name="search_query" autocomplete="off" placeholder="Search products&#8230;">
      <input type="submit" value="Search" ng-hide="true">

      <em ng-if="suggestions" ng-pluralize count="suggestions.length" when="searchResultText()" role="status" aria-live="polite" class="hide-visually"></em>
    <% end %>
    <%# //Search form %>

    <%# Close search %>
    <button class="btn header__overlay__close-btn hide-fully--non-palm js-search-btn-toggle" type="button">
      <span class="icon icon--close-lrg js-disabled-hide" aria-hidden="true"></span>
      <span class="hide-visually"> Close search</span>
    </button>
    <%# //Close search %>

    <%# Search results %>
    <div class="search-results" ng-show="suggestions.length > 0">
      <div class="search-results__inner island island--flush-btm">
        <h2 class="search-results__hdr">Search results</h2>
        <ul class="search-results__list" tabindex="0">
          <li ng-repeat="suggestion in suggestions" role="presentation">
            <a href="<%= centre_products_path(params[:centre_id] || params[:id]) %>{{suggestion['queryString']}}" target="_self" tabindex="-1">{{suggestion['description']}}</a>
          </li>
        </ul>
      </div>
    </div>
    <%# //Search results %>

  </div>
</div>