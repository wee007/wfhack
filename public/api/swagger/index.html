<!DOCTYPE html>
<html>
<head>
    <title>Westfield Labs API</title>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet'>
    <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css' rel='stylesheet'>
    <link href='css/hightlight.default.css' media='screen' rel='stylesheet'>
    <link href='css/screen.css' media='screen' rel='stylesheet'>
    <link href='/api/css/styles.css' rel='stylesheet'>
    <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
    <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
    <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
    <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
    <script src='lib/handlebars-1.0.rc.1.js' type='text/javascript'></script>
    <script src='lib/underscore-min.js' type='text/javascript'></script>
    <script src='lib/backbone-min.js' type='text/javascript'></script>
    <script src='lib/swagger.js' type='text/javascript'></script>
    <script src='swagger-ui.js' type='text/javascript'></script>
    <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <script type="text/javascript">
	$(function () {
        var service = window.location.search.replace('?service=', ''),
            group,
            discoveryUrl = service+'/swagger-doc.json';

        window.swaggerUi = new SwaggerUi({
            discoveryUrl: discoveryUrl,
            apiKey: "",
            dom_id: "swagger-ui-container",
            supportHeaderParams: false,
            supportedSubmitMethods: ['get'],
            onComplete: function(swaggerApi, swaggerUi){
                _.each(swaggerApi.apisArray, function(resource) {
                    if (resource.basePath.match('dbg.westfield.com')) {
                        resource.basePath = '';
                    }
                });
                if(console) {
                    console.log("Loaded SwaggerUI");
                    console.log(swaggerApi);
                    console.log(swaggerUi);
                }
              $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
            },
            onFailure: function(data) {
                if(console) {
                    console.log("Unable to Load SwaggerUI");
                    console.log(data);
                }
            },
            docExpansion: "none"
        });
        window.swaggerUi.load();

        /*
         * Images
         */
        $(document).on('click', '.swagger-doc', function (e) {
            e.preventDefault();
            if ($('#image-doc').hasClass('in')) {
                $('#image-doc').collapse('hide');
            }
            window.swaggerUi.headerView.trigger('update-swagger-ui', {
                discoveryUrl: e.target.href + '/swagger-doc.json'
            });
        });

        $(document).on('show hide', '#image-doc', function (e) {
          $('#swagger-ui-container').collapse('toggle');
        });

        /*
         * Navigation
         */
        $(document).on('show hide', '.accordion-body', function (e) {
            $(e.target).siblings('.accordion-heading').find('.accordion-toggle').toggleClass('dropup');
        });

        switch(service) {
            case '/api/aaa':
                group = 'aaa';
                break;
            case '/api/file':
            case '/api/search':
            case '/api/stream':
                group = 'micro';
                break;
            default:
                group = 'content';
        }
        $('.'+ group +' .accordion-body').addClass('in');
        $('.'+ group +' .accordion-toggle').addClass('dropup');
    });
    </script>
</head>

<body class="swagger">
    <div class="navbar navbar-inverse">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span12">
                        <a href="/api/index.html"><img src="/api/i/logo.png" class="logo"></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="sidebar-nav">
                <div class="accordion" id="group">
                    <div class="accordion-group content">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseOne">
                                Directory Services
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseOne" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="/api/product" class="swagger-doc">Categories</a></li>
                                    <li><a href="/api/centre" class="swagger-doc">Centres</a></li>
                                    <li><a href="/api/deal" class="swagger-doc">Deals</a></li>
                                    <li><a href="/api/event" class="swagger-doc">Events</a></li>
                                    <li><a href="/api/movie" class="swagger-doc">Movies</a></li>
                                    <li><a href="https://retailerintegration.atlassian.net/wiki/display/ret/Westfield+Retailer+Integration" target="_blank">Products</a></li>
                                    <li><a href="/api/store" class="swagger-doc">Stores</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-group aaa">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseTwo">
                                User Authentication
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseTwo" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="/api/aaa" class="swagger-doc">AAA</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-group micro">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseThree">
                                Platform Services
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseThree" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="/api/file" class="swagger-doc">Files</a></li>
                                    <li><a href="#image-doc" data-toggle="collapse">Images</a></li>
                                    <li><a href="/api/search" class="swagger-doc">Search</a></li>
                                    <li><a href="/api/stream" class="swagger-doc">Streams</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="span9 offset3">
                <div class="row-fluid">
                    <div class="span11">
                        <div id="message-bar" class="swagger-ui-wrap">
                            &nbsp;
                        </div>

                        <div id="swagger-ui-container" class="swagger-ui-wrap collapse in"></div>

                        <div id="image-doc" class="collapse">
                            <h2>images</h2>
                            <p>
                                Westfield uses <a href="http://cloudinary.com" target="_blank">Cloudinary</a> for image transformation services.
                            </p>
                            <p>
                                If the images you need to transform are hosted by Westfield, you can use the service by following
                                the <a href="http://cloudinary.com/documentation" target="_blank">Cloudinary Documentation</a> and using
                                Westfield's Cloud Name: <strong>wlabs</strong>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
