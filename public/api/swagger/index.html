<!DOCTYPE html>
<html>
<head>
    <title>Westfield Labs API</title>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet'>
    <link href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css' rel='stylesheet'>
    <link href='css/hightlight.default.css' media='screen' rel='stylesheet'>
    <link href='css/screen.css' media='screen' rel='stylesheet'>
    <link href='/api/css/styles.css' rel='stylesheet'>
    <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
    <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
    <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
    <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
    <script src='lib/handlebars-1.0.rc.1.js' type='text/javascript'></script>
    <script src='lib/underscore-min.js' type='text/javascript'></script>
    <script src='lib/backbone-min.js' type='text/javascript'></script>
    <script src='lib/swagger.js' type='text/javascript'></script>
    <script src='swagger-ui.js' type='text/javascript'></script>
    <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

    <script type="text/javascript">
	$(function () {
        var service = window.location.search.replace('?service=', ''),
            discoveryUrl = service+'/swagger-doc.json';

        window.swaggerUi = new SwaggerUi({
            discoveryUrl: discoveryUrl,
            apiKey: "",
            dom_id: "swagger-ui-container",
            supportHeaderParams: false,
            supportedSubmitMethods: ['get'],
            onComplete: function(swaggerApi, swaggerUi){
                _.each(swaggerApi.apisArray, function(resource) {
                    if (resource.basePath.match('dbg.westfield.com')) {
                        resource.basePath = '';
                    }
                });
                if(console) {
                    console.log("Loaded SwaggerUI")
                    console.log(swaggerApi);
                    console.log(swaggerUi);
                }
              $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
            },
            onFailure: function(data) {
                if(console) {
                    console.log("Unable to Load SwaggerUI");
                    console.log(data);
                }
            },
            docExpansion: "none"
        });
        window.swaggerUi.load();

        $(document).on('click', '.swagger-doc', function (e) {
            e.preventDefault();
            window.swaggerUi.headerView.trigger('update-swagger-ui', {
                discoveryUrl: e.target.href + '/swagger-doc.json'
            });
        });

        $(document).on('show hide', '.accordion-body', function (e) {
            $(e.target).siblings('.accordion-heading').find('.accordion-toggle').toggleClass('dropup');
        });

        switch(service) {
            case '/api/aaa':
                $('.aaa .accordion-body').collapse('show')
                break;
            case '/api/file':
                $('.micro .accordion-body').collapse('show')
                break;
            default:
                $('.content .accordion-body').collapse('show')
        }
    });
    </script>
</head>

<body class="swagger">
    <div class="container-fluid">
        <div class="row-fluid header">
            <div class="span12">
                <a href="/api/index.html"><img src="/api/i/westfieldLabs_logo_240x60.png" class="logo"></a>
            </div>
        </div>

        <div class="row-fluid">
            <div class="left_col span3" style="">
                <div class="accordion affix" id="group">
                    <div class="accordion-group content">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseOne">
                                Directory Content
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseOne" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="http://product-service.development.dbg.westfield.com/api/product/master/categories" target="_blank">Categories</a></li>
                                    <li><a href="/api/centre" class="swagger-doc">Centres</a></li>
                                    <li><a href="/api/deal" class="swagger-doc">Deals</a></li>
                                    <li><a href="/api/event" class="swagger-doc">Events</a></li>
                                    <li><a href="/api/movie" class="swagger-doc">Movies</a></li>
                                    <li><a href="/api/store" class="swagger-doc">Stores</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-group aaa">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseTwo">
                                Users &amp; Authentication
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseTwo" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="/api/aaa" class="swagger-doc">AAA</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-group micro">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#group" href="#collapseThree">
                                Platform/Micro Services
                                <span class="caret pull-right"></span>
                            </a>
                        </div>
                        <div id="collapseThree" class="accordion-body collapse">
                            <div class="accordion-inner">
                                <ul>
                                    <li><a href="/api/file" class="swagger-doc">Files</a></li>
                                    <li><a href="http://cloudinary.com/documentation" target="_blank">Images (cloudinary.com)</a></li>
                                    <li><a href="/api/search" class="swagger-doc">Search</a></li>
                                    <li><a href="/api/stream" class="swagger-doc">Streams</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="span8">
                <div class="row-fluid">
                    <div class="span12">
                        <div id="message-bar" class="swagger-ui-wrap">
                            &nbsp;
                        </div>

                        <div id="swagger-ui-container" class="swagger-ui-wrap"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
